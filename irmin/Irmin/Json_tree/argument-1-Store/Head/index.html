<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Head (irmin.Irmin.Json_tree.1-Store.Head)</title><link rel="stylesheet" href="../../../../../_odoc-theme/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc v1.1.1-1373-g2e7c1c75"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><nav><a href="../index.html">Up</a> – <a href="../../../../index.html">irmin</a> &#x00BB; <a href="../../../index.html">Irmin</a> &#x00BB; <a href="../../index.html">Json_tree</a> &#x00BB; <a href="../index.html">1-Store</a> &#x00BB; Head</nav><header><h1>Module <code>1-Store.Head</code></h1><p>Managing the store's heads.</p></header><div class="content"><div><div class="spec value" id="val-list" class="anchored"><a href="#val-list" class="anchor"></a><code><span class="keyword">val</span> list : <a href="../index.html#type-repo">repo</a> <span>&#45;&gt;</span> <span><span><a href="../index.html#type-commit">commit</a> list</span> <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>list t</code> is the list of all the heads in local store. Similar to <code>git rev-list --all</code>.</p></div></div><div><div class="spec value" id="val-find" class="anchored"><a href="#val-find" class="anchor"></a><code><span class="keyword">val</span> find : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="../index.html#type-commit">commit</a> option</span> <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>find t</code> is the current head of the store <code>t</code>. This works for both persistent and temporary branches. In the case of a persistent branch, this involves getting the the head associated with the branch, so this may block. In the case of a temporary store, it simply returns the current head. Returns <code>None</code> if the store has no contents. Similar to <code>git rev-parse HEAD</code>.</p></div></div><div><div class="spec value" id="val-get" class="anchored"><a href="#val-get" class="anchor"></a><code><span class="keyword">val</span> get : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="../index.html#type-commit">commit</a> <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p>Same as <a href="index.html#val-find"><code>find</code></a> but raise <code>Invalid_argument</code> if the store does not have any contents.</p></div></div><div><div class="spec value" id="val-set" class="anchored"><a href="#val-set" class="anchor"></a><code><span class="keyword">val</span> set : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> <span>unit <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>set t h</code> updates <code>t</code>'s contents with the contents of the commit <code>h</code>. Can cause data loss as it discards the current contents. Similar to <code>git reset --hard &lt;hash&gt;</code>.</p></div></div><div><div class="spec value" id="val-fast_forward" class="anchored"><a href="#val-fast_forward" class="anchor"></a><code><span class="keyword">val</span> fast_forward : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;max_depth:int</span> <span>&#45;&gt;</span> <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> <span><span><span>(unit, <a href="../index.html#type-ff_error">ff_error</a>)</span> <a href="../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span> <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>fast_forward t h</code> is similar to <code>update</code> but the <code>t</code>'s head is updated to <code>h</code> only if <code>h</code> is stricly in the future of <code>t</code>'s current head. <code>max_depth</code> or <code>n</code> are used to limit the search space of the lowest common ancestors (see <a href="../index.html#val-lcas"><code>lcas</code></a>).</p><p>The result is:</p><ul><li><code>Ok ()</code> if the operation is succesfull;</li><li><code>Error `No_change</code> if <code>h</code> is already <code>t</code>'s head;</li><li><code>Error `Rejected</code> if <code>h</code> is not in the strict future of <code>t</code>'s head.</li><li><code>Error e</code> if the history exploration has been cut before getting useful results. In that case. the operation can be retried using different parameters of <code>n</code> and <code>max_depth</code> to get better results.</li></ul></div></div><div><div class="spec value" id="val-test_and_set" class="anchored"><a href="#val-test_and_set" class="anchor"></a><code><span class="keyword">val</span> test_and_set : <a href="../index.html#type-t">t</a> <span>&#45;&gt;</span> <span>test:<span><a href="../index.html#type-commit">commit</a> option</span></span> <span>&#45;&gt;</span> <span>set:<span><a href="../index.html#type-commit">commit</a> option</span></span> <span>&#45;&gt;</span> <span>bool <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p>Same as <code>update_head</code> but check that the value is <code>test</code> before updating to <code>set</code>. Use <code>update</code> or <a href="index.html#val-merge"><code>merge</code></a> instead if possible.</p></div></div><div><div class="spec value" id="val-merge" class="anchored"><a href="#val-merge" class="anchor"></a><code><span class="keyword">val</span> merge : <span>into:<a href="../index.html#type-t">t</a></span> <span>&#45;&gt;</span> <span>info:<a href="../../../Info/index.html#type-f">Info.f</a></span> <span>&#45;&gt;</span> <span>?&#8288;max_depth:int</span> <span>&#45;&gt;</span> <span>?&#8288;n:int</span> <span>&#45;&gt;</span> <a href="../index.html#type-commit">commit</a> <span>&#45;&gt;</span> <span><span><span>(unit, <a href="../../../Merge/index.html#type-conflict">Merge.conflict</a>)</span> <a href="../../../../../ocaml/Stdlib/index.html#type-result">Stdlib.result</a></span> <a href="../../../../../lwt/Lwt/index.html#type-t">Lwt.t</a></span></code></div><div><p><code>merge ~into:t ?max_head ?n commit</code> merges the contents of the commit associated to <code>commit</code> into <code>t</code>. <code>max_depth</code> is the maximal depth used for getting the lowest common ancestor. <code>n</code> is the maximum number of lowest common ancestors. If present, <code>max_depth</code> or <code>n</code> are used to limit the search space of the lowest common ancestors (see <a href="../index.html#val-lcas"><code>lcas</code></a>).</p></div></div></div></body></html>